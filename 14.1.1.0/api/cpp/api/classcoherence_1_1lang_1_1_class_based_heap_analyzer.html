<!--
  Copyright (c) 2000, 2020, Oracle and/or its affiliates.

  Licensed under the Universal Permissive License v 1.0 as shown at
  http://oss.oracle.com/licenses/upl.
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Oracle&amp;reg; Fusion Middleware C++ API Reference for Oracle Coherence: ClassBasedHeapAnalyzer Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<b>Oracle&reg; Fusion Middleware C++ API Reference for Oracle Coherence<br>14c (14.1.1.0.2 Internal-lsho-mac-0716.2020.0219)</b><br>F23533-01
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li class="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="namespacecoherence.html">coherence</a>::<a class="el" href="namespacecoherence_1_1lang.html">lang</a>::<a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html">ClassBasedHeapAnalyzer</a></div>
<h1>ClassBasedHeapAnalyzer Class Reference</h1><!-- doxytag: class="coherence::lang::ClassBasedHeapAnalyzer" --><!-- doxytag: inherits="coherence::lang::AbstractHeapAnalyzer" --><code>#include &lt;<a class="el" href="_class_based_heap_analyzer_8hpp-source.html">coherence/lang/ClassBasedHeapAnalyzer.hpp</a>&gt;</code>
<p>
Inherits <a class="el" href="classcoherence_1_1lang_1_1_abstract_heap_analyzer.html">AbstractHeapAnalyzer</a>.
<p>

<p>
<a href="classcoherence_1_1lang_1_1_class_based_heap_analyzer-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html" title="ClassBasedHeapAnalyzer provides heap analysis at the class level, that is it tracks...">ClassBasedHeapAnalyzer</a> provides heap analysis at the class level, that is it tracks the number of live instances of each class. 
<p>
The memory consumption of this heap analyzer is relative to the number of classes used within the process. The CPU consumption is also very low, each registration consists of roughly four compare-and-set operations. It is well suited for development as well as many production environments.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classcoherence_1_1lang_1_1_object_count_heap_analyzer.html" title="ObjectCountHeapAnalyzer provides simple heap analysis based solely on the count of...">ObjectCountHeapAnalyzer</a> for a lower overhead analyzer</dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>mf 2008.04.27 </dd></dl>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5b310f5b3b4a79c7cde67e22f5bfd543"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::Handle" ref="5b310f5b3b4a79c7cde67e22f5bfd543" args="" -->
typedef spec::Handle&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#5b310f5b3b4a79c7cde67e22f5bfd543">Handle</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html" title="ClassBasedHeapAnalyzer provides heap analysis at the class level, that is it tracks...">ClassBasedHeapAnalyzer</a> Handle definition. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9dff753690c2fde7f2096982681b2fe3"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::View" ref="9dff753690c2fde7f2096982681b2fe3" args="" -->
typedef spec::View&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#9dff753690c2fde7f2096982681b2fe3">View</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html" title="ClassBasedHeapAnalyzer provides heap analysis at the class level, that is it tracks...">ClassBasedHeapAnalyzer</a> View definition. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f6b6cf6ce7af189584f0d92db3187844"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::Holder" ref="f6b6cf6ce7af189584f0d92db3187844" args="" -->
typedef spec::Holder&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#f6b6cf6ce7af189584f0d92db3187844">Holder</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html" title="ClassBasedHeapAnalyzer provides heap analysis at the class level, that is it tracks...">ClassBasedHeapAnalyzer</a> Holder definition. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cfc82053b5d10ed074fefee9f8f26e1b"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::capture" ref="cfc82053b5d10ed074fefee9f8f26e1b" args="() const " -->
virtual <br>
<a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer_1_1_snapshot.html#9dff753690c2fde7f2096982681b2fe3">HeapAnalyzer::Snapshot::View</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#cfc82053b5d10ed074fefee9f8f26e1b">capture</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Capture a <a class="el" href="classcoherence_1_1lang_1_1_heap_analyzer_1_1_snapshot.html" title="Snapshot provides a abstract mechanism for comparing successive heap analysis points...">Snapshot</a> of the current state of the heap.<p>
Note, when performing captures in a loop, and assigning the captured snapshot to a handle referencing a snapshot, it is advisable to NULL out the handle first, so as to avoid the new snapshot including the "cost" of snapshot it is about to replace.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a <a class="el" href="classcoherence_1_1lang_1_1_heap_analyzer_1_1_snapshot.html" title="Snapshot provides a abstract mechanism for comparing successive heap analysis points...">Snapshot</a> of the current state of the heap.</dd></dl>
 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="08c5ab30603e07adc883f161b81d3997"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::delta" ref="08c5ab30603e07adc883f161b81d3997" args="(HeapAnalyzer::Snapshot::View vSnap) const " -->
virtual <br>
<a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer_1_1_snapshot.html#9dff753690c2fde7f2096982681b2fe3">HeapAnalyzer::Snapshot::View</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#08c5ab30603e07adc883f161b81d3997">delta</a> (<a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer_1_1_snapshot.html#9dff753690c2fde7f2096982681b2fe3">HeapAnalyzer::Snapshot::View</a> vSnap) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute the delta between the supplied <a class="el" href="classcoherence_1_1lang_1_1_heap_analyzer_1_1_snapshot.html" title="Snapshot provides a abstract mechanism for comparing successive heap analysis points...">Snapshot</a> and the current heap state.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vThat</em>&nbsp;</td><td>the snapshot to compare against.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a snapshot containing the delta</dd></dl>
 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8120449c2ac262b76fc99abbe8e1b248"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::getObjectCount" ref="8120449c2ac262b76fc99abbe8e1b248" args="() const " -->
virtual int64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#8120449c2ac262b76fc99abbe8e1b248">getObjectCount</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the number of registered objects.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the number of registered objects</dd></dl>
 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c320973849982cc8c57b4d790d0335f1"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::getImmortalCount" ref="c320973849982cc8c57b4d790d0335f1" args="() const " -->
virtual int64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#c320973849982cc8c57b4d790d0335f1">getImmortalCount</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the number of objects which have been marked as uncollectable.<p>
Return the number of objects which have been marked as uncollectable. <br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#744a9838e62af22c2840286a92c84c85">ClassBasedHeapAnalyzer</a> (bool fShowAllocations=false)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new <a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html" title="ClassBasedHeapAnalyzer provides heap analysis at the class level, that is it tracks...">ClassBasedHeapAnalyzer</a>.  <a href="#744a9838e62af22c2840286a92c84c85"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2417f3410c8a0b9e8532960397590a96"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::safeRegisterObject" ref="2417f3410c8a0b9e8532960397590a96" args="(const Object &amp;o)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#2417f3410c8a0b9e8532960397590a96">safeRegisterObject</a> (const <a class="el" href="classcoherence_1_1lang_1_1_object.html">Object</a> &amp;o)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Registers an object with the heap analyzer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>o</em>&nbsp;</td><td>the object to register</td></tr>
  </table>
</dl>
 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a3e42afc73cedac30fc135b6547acb27"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::safeUnregisterObject" ref="a3e42afc73cedac30fc135b6547acb27" args="(const Object &amp;o)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#a3e42afc73cedac30fc135b6547acb27">safeUnregisterObject</a> (const <a class="el" href="classcoherence_1_1lang_1_1_object.html">Object</a> &amp;o)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unregisters an object with the heap analyzer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>o</em>&nbsp;</td><td>the object to unregister</td></tr>
  </table>
</dl>
 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e9d19ed69d14b44e4046d9c2cd3ffc7e"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::registerObject" ref="e9d19ed69d14b44e4046d9c2cd3ffc7e" args="(const Object &amp;o)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#e9d19ed69d14b44e4046d9c2cd3ffc7e">registerObject</a> (const <a class="el" href="classcoherence_1_1lang_1_1_object.html">Object</a> &amp;o)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register a newly created <a class="el" href="classcoherence_1_1lang_1_1_object.html" title="Object is the base class for all Coherence managed objects.">Object</a> with the system.<p>
This method is called automatically by <a class="el" href="classcoherence_1_1lang_1_1_object.html" title="Object is the base class for all Coherence managed objects.">coherence::lang::Object</a> once the <a class="el" href="classcoherence_1_1lang_1_1_object.html" title="Object is the base class for all Coherence managed objects.">Object</a> has finished construction.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>o</em>&nbsp;</td><td>the newly created <a class="el" href="classcoherence_1_1lang_1_1_object.html" title="Object is the base class for all Coherence managed objects.">Object</a>.</td></tr>
  </table>
</dl>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>o</em>&nbsp;</td><td>the object to register</td></tr>
  </table>
</dl>
If the calling thread is reentering this method return immediately otherwise delegates to safeRegisterObject. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1ee65239ff773394464c4a034a09f50c"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::unregisterObject" ref="1ee65239ff773394464c4a034a09f50c" args="(const Object &amp;o)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#1ee65239ff773394464c4a034a09f50c">unregisterObject</a> (const <a class="el" href="classcoherence_1_1lang_1_1_object.html">Object</a> &amp;o)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unregister an <a class="el" href="classcoherence_1_1lang_1_1_object.html" title="Object is the base class for all Coherence managed objects.">Object</a> with the system.<p>
This method is called automatically by <a class="el" href="classcoherence_1_1lang_1_1_object.html" title="Object is the base class for all Coherence managed objects.">coherence::lang::Object</a> just prior to the deletion of the <a class="el" href="classcoherence_1_1lang_1_1_object.html" title="Object is the base class for all Coherence managed objects.">Object</a>. No new handles or views may be created to the object.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>o</em>&nbsp;</td><td>the <a class="el" href="classcoherence_1_1lang_1_1_object.html" title="Object is the base class for all Coherence managed objects.">Object</a> to unregister</td></tr>
  </table>
</dl>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>o</em>&nbsp;</td><td>the object to unregister</td></tr>
  </table>
</dl>
If the calling thread is reentering this method return immediately otherwise delegates to safeUnregisterObject. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="00649053fef046b313a1b8c10bd45cf0"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::registerImmortal" ref="00649053fef046b313a1b8c10bd45cf0" args="(const Object &amp;o)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#00649053fef046b313a1b8c10bd45cf0">registerImmortal</a> (const <a class="el" href="classcoherence_1_1lang_1_1_object.html">Object</a> &amp;o)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Invoked when an object is deemed to immortal and can never be collected.<p>
Note the specified object will have already been registered via registerObject. <br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="68c322038d165b696ea37cf4180c4c5f"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::m_fShowAllocations" ref="68c322038d165b696ea37cf4180c4c5f" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#68c322038d165b696ea37cf4180c4c5f">m_fShowAllocations</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True if allocations should be printed as part of analysis. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="672a75d846b12110724eb45105f36b30"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::m_cImmortals" ref="672a75d846b12110724eb45105f36b30" args="" -->
NativeAtomic64&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html#672a75d846b12110724eb45105f36b30">m_cImmortals</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of immortal objects. <br></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer_1_1_class_stats.html">ClassStats</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Statistics relating to a class.  <a href="classcoherence_1_1lang_1_1_class_based_heap_analyzer_1_1_class_stats.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer_1_1_snapshot.html">Snapshot</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer_1_1_snapshot.html" title="Snapshot containing the object count.">Snapshot</a> containing the object count.  <a href="classcoherence_1_1lang_1_1_class_based_heap_analyzer_1_1_snapshot.html#_details">More...</a><br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="744a9838e62af22c2840286a92c84c85"></a><!-- doxytag: member="coherence::lang::ClassBasedHeapAnalyzer::ClassBasedHeapAnalyzer" ref="744a9838e62af22c2840286a92c84c85" args="(bool fShowAllocations=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html">ClassBasedHeapAnalyzer</a>           </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>fShowAllocations</em> = <code>false</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new <a class="el" href="classcoherence_1_1lang_1_1_class_based_heap_analyzer.html" title="ClassBasedHeapAnalyzer provides heap analysis at the class level, that is it tracks...">ClassBasedHeapAnalyzer</a>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fShowAllocations</em>&nbsp;</td><td>true if allocations should also be shown </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>coherence/lang/<a class="el" href="_class_based_heap_analyzer_8hpp-source.html">ClassBasedHeapAnalyzer.hpp</a></ul>
<center>
  Copyright &copy; 2000, 2020, Oracle and/or its affiliates.
  Licensed under the Universal Permissive License v 1.0 as shown at
  http://oss.oracle.com/licenses/upl.
</center>
</BODY>
</HTML>
