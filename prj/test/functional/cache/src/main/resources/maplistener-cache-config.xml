<?xml version="1.0"?>
<!--
  Copyright (c) 2000, 2022, Oracle and/or its affiliates.

  Licensed under the Universal Permissive License v 1.0 as shown at
  https://oss.oracle.com/licenses/upl.
  -->

<cache-config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xmlns="http://xmlns.oracle.com/coherence/coherence-cache-config"
              xsi:schemaLocation="http://xmlns.oracle.com/coherence/coherence-cache-config coherence-cache-config.xsd">      
  
  <caching-scheme-mapping> 
    <cache-mapping> 
      <cache-name>local-client*</cache-name> 
      <scheme-name>local-client-scheme</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>local-bm*</cache-name> 
      <scheme-name>local-bm-scheme</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>local-overflow-client*</cache-name> 
      <scheme-name>local-overflow-client-scheme</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>COH9787-local-BM*</cache-name>
      <scheme-name>dist-scheme-no-listener</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>COH9787-RWBM-local-front*</cache-name>
      <scheme-name>dist-rwbm-local-front</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>dist-client*</cache-name> 
      <scheme-name>dist-scheme-client</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>dist-bm*</cache-name> 
      <scheme-name>dist-bm-scheme</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>dist-both*</cache-name> 
      <scheme-name>dist-both-scheme</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>dist-builtin*</cache-name> 
      <scheme-name>dist-builtin-params-scheme</scheme-name> 
    </cache-mapping>
    <cache-mapping> 
      <cache-name>dist-overflow-top</cache-name> 
      <scheme-name>dist-overflow-top-scheme</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>dist-overflow-front</cache-name> 
      <scheme-name>dist-overflow-front-scheme</scheme-name> 
    </cache-mapping>
     <cache-mapping> 
      <cache-name>dist-overflow-back</cache-name> 
      <scheme-name>dist-overflow-back-scheme</scheme-name> 
    </cache-mapping>   
    <cache-mapping> 
      <cache-name>dist-rwbm-test</cache-name> 
      <scheme-name>dist-rwbm-scheme</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>dist-rwbm-internal-test</cache-name> 
      <scheme-name>dist-rwbm-internal-scheme</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>dist-rwbm-both</cache-name> 
      <scheme-name>dist-rwbm-both-scheme</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>dist-rwbm-internal-both</cache-name> 
      <scheme-name>dist-rwbm-internal-both-scheme</scheme-name> 
    </cache-mapping>
    <cache-mapping>
      <cache-name>dist-ed-no-listener</cache-name>
      <scheme-name>dist-ed-no-listener-scheme</scheme-name>
    </cache-mapping>
    <cache-mapping> 
      <cache-name>near-client-listener*</cache-name>
      <scheme-name>near-client-listener-scheme</scheme-name> 
    </cache-mapping>
    <cache-mapping> 
      <cache-name>near-back-listener</cache-name> 
      <scheme-name>near-back-listener-scheme</scheme-name> 
    </cache-mapping>         
    <cache-mapping> 
      <cache-name>near-front-listener</cache-name> 
      <scheme-name>near-front-listener-scheme</scheme-name> 
    </cache-mapping>
    <cache-mapping> 
      <cache-name>overflow-client-listener</cache-name> 
      <scheme-name>overflow-client-listener-scheme</scheme-name> 
    </cache-mapping>
    <cache-mapping> 
      <cache-name>overflow-back-listener</cache-name> 
      <scheme-name>overflow-back-listener-scheme</scheme-name> 
    </cache-mapping>         
    <cache-mapping> 
      <cache-name>overflow-front-listener</cache-name> 
      <scheme-name>overflow-front-listener-scheme</scheme-name> 
    </cache-mapping>    
    <cache-mapping> 
      <cache-name>repl-client*</cache-name> 
      <scheme-name>repl-scheme-client</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>repl-bm*</cache-name> 
      <scheme-name>repl-bm-scheme</scheme-name> 
    </cache-mapping> 
    <cache-mapping> 
      <cache-name>repl-both*</cache-name> 
      <scheme-name>repl-both-scheme</scheme-name> 
    </cache-mapping> 
  </caching-scheme-mapping> 
  
  <caching-schemes> 
    <local-scheme> 
      <scheme-name>local-client-scheme</scheme-name> 
      <listener>
        <class-scheme>
          <class-name>cache.MapListenerTests$ClientListener</class-name>
        </class-scheme>
      </listener>
     </local-scheme>  
          
    <local-scheme> 
      <scheme-name>local-bm-scheme</scheme-name> 
      <listener>
        <class-scheme>
          <class-name>cache.MapListenerTests$BackingMapListener</class-name>
          <init-params>
            <init-param>
              <param-type>com.tangosol.net.BackingMapManagerContext</param-type>
              <param-value>{manager-context}</param-value>
            </init-param>
          </init-params>
        </class-scheme>
      </listener>
    </local-scheme>   
     
    <overflow-scheme>
      <scheme-name>local-overflow-client-scheme</scheme-name>
      <front-scheme>
        <local-scheme>
        </local-scheme>
        </front-scheme>
      <back-scheme>
        <external-scheme>
          <nio-file-manager>
            <initial-size>64MB</initial-size>
            <maximum-size>64MB</maximum-size>
          </nio-file-manager>
        </external-scheme>
      </back-scheme>
      <listener>
        <class-scheme>
          <class-name>cache.MapListenerTests$ClientListener</class-name>
        </class-scheme>
      </listener>
    </overflow-scheme>
     
   <distributed-scheme> 
      <scheme-name>dist-scheme-no-listener</scheme-name> 
      <backing-map-scheme>
        <local-scheme>
        </local-scheme>
      </backing-map-scheme>
    </distributed-scheme>  
    
   <distributed-scheme> 
      <scheme-name>dist-scheme-client</scheme-name> 
      <backing-map-scheme>
        <local-scheme>
        </local-scheme>
      </backing-map-scheme>
      <listener>
        <class-scheme>
          <class-name>cache.MapListenerTests$ClientListener</class-name>
        </class-scheme>
      </listener>
    </distributed-scheme>  
        
   <distributed-scheme> 
      <scheme-name>dist-bm-scheme</scheme-name> 
      <backing-map-scheme>
        <local-scheme>
          <listener>
            <class-scheme>
              <class-name>cache.MapListenerTests$BackingMapListener</class-name>
              <init-params>
                <init-param>
                  <param-type>com.tangosol.net.BackingMapManagerContext</param-type>
                  <param-value>{manager-context}</param-value>
                </init-param>
              </init-params>
            </class-scheme>
          </listener>
        </local-scheme>
      </backing-map-scheme>
    </distributed-scheme>  

   <distributed-scheme> 
      <scheme-name>dist-both-scheme</scheme-name> 
      <backing-map-scheme>
        <local-scheme>
          <listener>
            <class-scheme>
              <class-name>cache.MapListenerTests$BackingMapListener</class-name>
              <init-params>
                <init-param>
                  <param-type>com.tangosol.net.BackingMapManagerContext</param-type>
                  <param-value>{manager-context}</param-value>
                </init-param>              
              </init-params>
            </class-scheme>
          </listener>
        </local-scheme>
      </backing-map-scheme>
      <listener>
        <class-scheme>
          <class-name>cache.MapListenerTests$ClientListener</class-name>
        </class-scheme>
      </listener>
    </distributed-scheme>    
    
   <distributed-scheme> 
      <scheme-name>dist-builtin-params-scheme</scheme-name> 
      <backing-map-scheme>
        <local-scheme>
          <listener>
            <class-scheme>
              <class-name>cache.MapListenerTests$BackingMapListener</class-name>
              <init-params>
                <init-param>
                  <param-type>com.tangosol.net.BackingMapManagerContext</param-type>
                  <param-value>{manager-context}</param-value>
                </init-param>
                <init-param>
                  <param-type>java.lang.ClassLoader</param-type>
                  <param-value>{class-loader}</param-value>
                </init-param>                
                <init-param>
                  <param-type>java.lang.String</param-type>
                  <param-value>{cache-name}</param-value>
                </init-param>  
              </init-params>
            </class-scheme>
          </listener>
        </local-scheme>
      </backing-map-scheme>
    </distributed-scheme> 
    
        
    <distributed-scheme>
      <scheme-name>dist-overflow-top-scheme</scheme-name>
      <backing-map-scheme>
        <overflow-scheme> 
          <front-scheme>
            <local-scheme/>
          </front-scheme>
          <back-scheme>
            <local-scheme/>
          </back-scheme>   
          <listener>
            <class-scheme>
              <class-name>cache.MapListenerTests$BackingMapListener</class-name>
              <init-params>
                <init-param>
                  <param-type>com.tangosol.net.BackingMapManagerContext</param-type>
                  <param-value>{manager-context}</param-value>
                </init-param>              
              </init-params>
            </class-scheme>
          </listener>         
        </overflow-scheme> 
      </backing-map-scheme>
    </distributed-scheme>
    
    <distributed-scheme>
      <scheme-name>dist-overflow-front-scheme</scheme-name>
      <backing-map-scheme>
        <overflow-scheme> 
          <front-scheme>
            <local-scheme>
              <scheme-ref>local-bm-scheme</scheme-ref>  
            </local-scheme>
          </front-scheme>
          <back-scheme>
            <local-scheme/>
          </back-scheme>         
        </overflow-scheme> 
      </backing-map-scheme>
    </distributed-scheme>
      
    <distributed-scheme>
      <scheme-name>dist-overflow-back-scheme</scheme-name>
      <backing-map-scheme>
        <overflow-scheme> 
          <front-scheme>  
            <local-scheme>
              <high-units>1</high-units>
            </local-scheme>
          </front-scheme>
          <back-scheme>
            <local-scheme>
              <scheme-ref>local-bm-scheme</scheme-ref>  
            </local-scheme>         
          </back-scheme>         
        </overflow-scheme> 
      </backing-map-scheme>
    </distributed-scheme>

    <distributed-scheme>
      <scheme-name>dist-rwbm-local-front</scheme-name>
      <backing-map-scheme>
        <read-write-backing-map-scheme>
          <internal-cache-scheme>
            <local-scheme/>
          </internal-cache-scheme>
          <cachestore-scheme>
            <class-scheme>
              <class-name>{store com.oracle.coherence.testing.TestCacheStore}</class-name>
            </class-scheme>
          </cachestore-scheme>
        </read-write-backing-map-scheme>
      </backing-map-scheme>
      <autostart>true</autostart>
    </distributed-scheme>

    <distributed-scheme>
      <scheme-name>dist-rwbm-scheme</scheme-name>
      <backing-map-scheme>
        <read-write-backing-map-scheme>
          <internal-cache-scheme>
            <local-scheme/>
          </internal-cache-scheme>
          <cachestore-scheme>
            <class-scheme>
              <class-name>{store com.oracle.coherence.testing.TestCacheStore}</class-name>
            </class-scheme>
          </cachestore-scheme>
          <listener>
            <class-scheme>
              <class-name>cache.MapListenerTests$BackingMapListener</class-name>
               <init-params>
                <init-param>
                  <param-type>com.tangosol.net.BackingMapManagerContext</param-type>
                  <param-value>{manager-context}</param-value>
                </init-param>
              </init-params>
            </class-scheme>
          </listener>
        </read-write-backing-map-scheme>
      </backing-map-scheme>
      <autostart>true</autostart>
    </distributed-scheme>

    <distributed-scheme>
      <scheme-name>dist-rwbm-internal-scheme</scheme-name>
      <backing-map-scheme>
        <read-write-backing-map-scheme>
          <internal-cache-scheme>
             <local-scheme>
               <listener>
                 <class-scheme>
                   <class-name>cache.MapListenerTests$BackingMapListener</class-name>
                   <init-params>
                     <init-param>
                       <param-type>com.tangosol.net.BackingMapManagerContext</param-type>
                       <param-value>{manager-context}</param-value>
                     </init-param>
                   </init-params>
                 </class-scheme>
               </listener>
             </local-scheme>
          </internal-cache-scheme>
          <cachestore-scheme>
            <class-scheme>
              <class-name>{store com.oracle.coherence.testing.TestCacheStore}</class-name>
            </class-scheme>
          </cachestore-scheme>
        </read-write-backing-map-scheme>
      </backing-map-scheme>
      <autostart>true</autostart>
  </distributed-scheme>
            
    <distributed-scheme>
      <scheme-name>dist-rwbm-both-scheme</scheme-name>
      <backing-map-scheme>
        <read-write-backing-map-scheme>
          <internal-cache-scheme>
            <local-scheme/>
          </internal-cache-scheme>
          <cachestore-scheme>
            <class-scheme>
              <class-name>{store com.oracle.coherence.testing.TestCacheStore}</class-name>
            </class-scheme>
          </cachestore-scheme>
          <listener>
            <class-scheme>
              <class-name>cache.MapListenerTests$BackingMapListener</class-name>
            </class-scheme>
          </listener>
        </read-write-backing-map-scheme>
      </backing-map-scheme>
      <listener>
        <class-scheme>
          <class-name>cache.MapListenerTests$ClientListener</class-name>
        </class-scheme>
      </listener>
      <autostart>true</autostart>
    </distributed-scheme>            

    <distributed-scheme>
      <scheme-name>dist-rwbm-internal-both-scheme</scheme-name>
      <backing-map-scheme>
        <read-write-backing-map-scheme>
          <internal-cache-scheme>
             <local-scheme>
               <listener>
                 <class-scheme>
                   <class-name>cache.MapListenerTests$BackingMapListener</class-name>
                 </class-scheme>
               </listener>
             </local-scheme>
          </internal-cache-scheme>
          <cachestore-scheme>
            <class-scheme>
              <class-name>{store com.oracle.coherence.testing.TestCacheStore}</class-name>
            </class-scheme>
          </cachestore-scheme>
        </read-write-backing-map-scheme>
      </backing-map-scheme>
      <listener>
        <class-scheme>
          <class-name>cache.MapListenerTests$ClientListener</class-name>
        </class-scheme>
      </listener>
      <autostart>true</autostart>
   </distributed-scheme>

  <distributed-scheme>
    <scheme-name>dist-ed-no-listener-scheme</scheme-name>
    <service-name>EDDistributedCache</service-name>
    <backing-map-scheme>
      <ramjournal-scheme>
        <class-name>cache.MapListenerTests$UnforgivingCSC</class-name>
      </ramjournal-scheme>
    </backing-map-scheme>
   </distributed-scheme>
   
   <near-scheme> 
     <scheme-name>near-client-listener-scheme</scheme-name>      
     <front-scheme>
       <local-scheme/>
     </front-scheme>
     <back-scheme>
       <distributed-scheme> 
          <scheme-ref>dist-scheme-no-listener</scheme-ref>      
       </distributed-scheme>
     </back-scheme>       
     <listener>
       <class-scheme>
         <class-name>cache.MapListenerTests$ClientListener</class-name>
       </class-scheme>
      </listener>         
   </near-scheme> 
   
   <near-scheme> 
     <scheme-name>near-front-listener-scheme</scheme-name>      
     <front-scheme>
       <local-scheme> 
          <scheme-ref>local-client-scheme</scheme-ref>      
       </local-scheme>
     </front-scheme>
     <back-scheme>
       <distributed-scheme> 
          <scheme-ref>dist-scheme-no-listener</scheme-ref>      
       </distributed-scheme>
     </back-scheme>            
   </near-scheme> 
   
   <near-scheme> 
     <scheme-name>near-back-listener-scheme</scheme-name>      
     <front-scheme>
       <local-scheme/> 
     </front-scheme>
     <back-scheme>
       <distributed-scheme> 
          <scheme-ref>dist-bm-scheme</scheme-ref>      
       </distributed-scheme>
     </back-scheme>            
   </near-scheme>      
    
   <replicated-scheme> 
      <scheme-name>repl-scheme-client</scheme-name> 
      <backing-map-scheme>
        <local-scheme>
        </local-scheme>
      </backing-map-scheme>
      <listener>
        <class-scheme>
          <class-name>cache.MapListenerTests$ClientListener</class-name>
        </class-scheme>
      </listener>
    </replicated-scheme>  
        
   <replicated-scheme> 
      <scheme-name>repl-bm-scheme</scheme-name> 
      <backing-map-scheme>
        <local-scheme>
          <listener>
            <class-scheme>
              <class-name>cache.MapListenerTests$BackingMapListener</class-name>
              <init-params>
                <init-param>
                  <param-type>com.tangosol.net.BackingMapManagerContext</param-type>
                  <param-value>{manager-context}</param-value>
                </init-param>
              </init-params>
            </class-scheme>
          </listener>
        </local-scheme>
      </backing-map-scheme>
    </replicated-scheme>  

   <replicated-scheme> 
      <scheme-name>repl-both-scheme</scheme-name> 
      <backing-map-scheme>
        <local-scheme>
          <listener>
            <class-scheme>
              <class-name>cache.MapListenerTests$BackingMapListener</class-name>
              <init-params>
                <init-param>
                  <param-type>com.tangosol.net.BackingMapManagerContext</param-type>
                  <param-value>{manager-context}</param-value>
                </init-param>
              </init-params>
            </class-scheme>
          </listener>
        </local-scheme>
      </backing-map-scheme>
      <listener>
        <class-scheme>
          <class-name>cache.MapListenerTests$ClientListener</class-name>
        </class-scheme>
      </listener>
    </replicated-scheme>  
                  
  </caching-schemes> 
</cache-config>
