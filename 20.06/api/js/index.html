<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Oracle Coherence JavaScript Client - v1.0.4</title>
	<meta name="description" content="Documentation for Oracle Coherence JavaScript Client - v1.0.4">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">Oracle Coherence JavaScript Client - v1.0.4</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>Oracle Coherence JavaScript Client - v1.0.4</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<!--
Copyright (c) 2020 Oracle and/or its affiliates.

Licensed under the Universal Permissive License v 1.0 as shown at
http://oss.oracle.com/licenses/upl.
 -->
				<a href="#coherence-javascript-client" id="coherence-javascript-client" style="color: inherit; text-decoration: none;">
					<h1>Coherence JavaScript Client</h1>
				</a>
				<p>Coherence JavaScript Client allows Node applications to act as
					cache clients to a Coherence Cluster using gRPC framework as
				the network transport.</p>
				<a href="#features" id="features" style="color: inherit; text-decoration: none;">
					<h3>Features</h3>
				</a>
				<ul>
					<li>Familiar <code>Map</code>-like interface for manipulating entries</li>
					<li>Cluster-side querying and aggregation of map entries</li>
					<li>Cluster-side manipulation of map entries using <code>EntryProcessors</code></li>
					<li>Registration of listeners to be notified of map mutations</li>
				</ul>
				<a href="#requirements" id="requirements" style="color: inherit; text-decoration: none;">
					<h3>Requirements</h3>
				</a>
				<ul>
					<li>Coherence CE 20.06.1 or later (or equivalent non-open source editions) with a configured <a href="https://github.com/oracle/coherence/tree/master/prj/coherence-grpc-proxy">gRPC Proxy</a></li>
					<li>Node 14</li>
					<li>NPM 6.x</li>
				</ul>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h3>Usage</h3>
				</a>
				<p>Before testing the library, you must ensure a Coherence cluster is available.  For local development, we recommend using the Coherence CE Docker image; it contains everything necessary for the client to operate correctly.</p>
				<pre><code class="language-bash">docker run -d -p 1408:1408 oraclecoherence/coherence-ce:20.06.1</code></pre>
				<p>For more details on the image, see the <a href="https://github.com/oracle/coherence/tree/master/prj/coherence-docker">documentation</a>.</p>
				<a href="#declare-your-dependency" id="declare-your-dependency" style="color: inherit; text-decoration: none;">
					<h3>Declare Your Dependency</h3>
				</a>
				<p>To use the Coherence gRPC JavaScript Client, simply declare it as a dependency in your
				project&#39;s <code>package.json</code>:</p>
				<pre><code>...
<span class="hljs-string">&quot;dependencies&quot;</span>: {
    <span class="hljs-string">&quot;@oracle/coherence&quot;</span>: <span class="hljs-string">&quot;^1.0.0&quot;</span>,
},
...</code></pre>
				<a href="#examples" id="examples" style="color: inherit; text-decoration: none;">
					<h3>Examples</h3>
				</a>
				<blockquote>
					<p>NOTE: The following examples assume the Coherence container is running locally.
					You can start a container by running <code>npm run coh-up</code>.</p>
				</blockquote>
				<a href="#establishing-a-session" id="establishing-a-session" style="color: inherit; text-decoration: none;">
					<h4>Establishing a Session</h4>
				</a>
				<p>The Coherence uses the concept of a <code>Session</code> to manage a set of related Coherence resources,
					such as maps and/or caches. When using the Coherence JavaScript Client, a <code>Session</code> connects to a specific
					gRPC endpoint and uses a specific serialization format to marshal requests and responses.
					This means that different sessions using different serializers may connect to the same server endpoint. Typically,
					for efficiency the client and server would be configured to use matching serialization formats to avoid
					deserialization of data on the server but this does not have to be the case. If the server is using a different
					serializer for the server-side caches it must be able to deserialize the client&#39;s requests, so there must be
				a serializer configured on the server to match that used by the client.</p>
				<blockquote>
					<p>NOTE: Currently, the Coherence JavaScript client only supports JSON serialization</p>
				</blockquote>
				<p>A <code>Session</code> is constructed using an <code>Options</code> instance.  This instance provides configuration for:</p>
				<ul>
					<li><code>address</code> - the address of the Coherence gRPC proxy.  This defaults to <code>localhost:1408</code>.</li>
					<li><code>requestTimeoutInMillis</code> - the gRPC request timeout in milliseconds.  This defaults to <code>60000</code>.</li>
					<li><code>callOptions</code> - per-request gRPC call options.</li>
					<li><code>tls</code> - options related to the configuration of TLS.<ul>
							<li><code>enabled</code> - determines if TLS is enabled or not.  This defaults to <code>false</code>.</li>
							<li><code>caCertPath</code> - the path to the CA certificate.</li>
							<li><code>clientCertPath</code> - the path to the client certificate.</li>
							<li><code>clientKeyPath</code> - the path to the client certificate key.</li>
						</ul>
					</li>
				</ul>
				<pre><code class="language-typescript"><span class="hljs-keyword">const</span> { Session } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@oracle/coherence&#x27;</span>)

<span class="hljs-keyword">let</span> session = <span class="hljs-keyword">new</span> Session()</code></pre>
				<p>This is the simplest invocation which assumes the following defaults:</p>
				<ul>
					<li><code>address</code> is <code>localhost:1408</code></li>
					<li><code>requestTimeoutInMillis</code> is <code>60000</code></li>
					<li><code>tls</code> is <code>disabled</code></li>
				</ul>
				<p>To use values other than the default, create a new <code>Options</code> instance, configure as desired,
				and pass it to the constructor of the <code>Session</code>:</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> { Session, Options } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@oracle/coherence&#x27;</span>)

<span class="hljs-keyword">const</span> opts = <span class="hljs-keyword">new</span> Options()
opts.address = <span class="hljs-string">&#x27;example.com:4444&#x27;</span>

<span class="hljs-keyword">let</span> session = <span class="hljs-keyword">new</span> Session(opts)</code></pre>
				<p>It&#39;s also possible to control the default address the session will bind to by providing
					an address via the <code>grpc_proxy_address</code> environment variable.  The format of the value would
				be the same as if you configured it programmatically as the above example shows.</p>
				<p>Once the session has been constructed, it will now be possible to create maps and caches.</p>
				<a href="#basic-map-operations" id="basic-map-operations" style="color: inherit; text-decoration: none;">
					<h4>Basic Map Operations</h4>
				</a>
				<p>The map (<code>NamedMap</code>) and cache (<code>NamedCache</code>) implementations provide the same basic features as the Map provided
				by JavaScript except for the following differences:</p>
				<ul>
					<li>key equality isn&#39;t restricted to reference equality</li>
					<li>insertion order is not maintained</li>
					<li><code>set()</code> calls cannot be chained because of the asynchronous nature of the API</li>
				</ul>
				<blockquote>
					<p>NOTE:  The only difference between <code>NamedCache</code> and <code>NamedMap</code> is that the &#39;NamedCache&#39; allows associating a
					<code>time-to-live</code> on the cache entry, while <code>NamedMap</code> does not</p>
				</blockquote>
				<p>For the following examples, let&#39;s assume that we have a Map defined in Coherence named <code>Test</code>.  To get access to the map from the client:</p>
				<blockquote>
					<p>NOTE: If using the Docker image previously mentioned for testing, you don&#39;t need to worry about the details of the map name.  Any name will work.</p>
				</blockquote>
				<pre><code class="language-javascript"><span class="hljs-keyword">let</span> map = session.getMap(<span class="hljs-string">&#x27;Test&#x27;</span>)</code></pre>
				<p>Once we have the handle to our map, we can invoke the same basic operations as a standard JavaScript Map:</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">await</span> map.size
<span class="hljs-comment">// (zero)</span>

<span class="hljs-keyword">await</span> map.set(<span class="hljs-string">&#x27;key1&#x27;</span>, <span class="hljs-string">&#x27;value1&#x27;</span>)
<span class="hljs-keyword">await</span> map.set(<span class="hljs-string">&#x27;key2&#x27;</span>, <span class="hljs-string">&#x27;value2&#x27;</span>)
<span class="hljs-comment">// returns a Promise vs the map itself, so these can&#x27;t be chained</span>

<span class="hljs-keyword">await</span> map.size
<span class="hljs-comment">// (two)</span>

<span class="hljs-keyword">await</span> map.get(<span class="hljs-string">&#x27;key1&#x27;</span>)
<span class="hljs-comment">// value1</span>

<span class="hljs-keyword">await</span> map.has(<span class="hljs-string">&#x27;key2&#x27;</span>)
<span class="hljs-comment">// true</span>

<span class="hljs-keyword">await</span> map.has(<span class="hljs-string">&#x27;key3&#x27;</span>)
<span class="hljs-comment">// false</span>

<span class="hljs-keyword">await</span> map.keys()
<span class="hljs-comment">// [&#x27;key1&#x27;, &#x27;key2&#x27;]</span>

<span class="hljs-keyword">await</span> map.values()
<span class="hljs-comment">// [&#x27;value1&#x27;, &#x27;value2&#x27;]</span>

<span class="hljs-keyword">await</span> map.entries()
<span class="hljs-comment">// [{key: &#x27;key1&#x27;, value: &#x27;value1&#x27;}, {key: &#x27;key2&#x27;, value: &#x27;value2&#x27;}]</span>

<span class="hljs-keyword">await</span> map.forEach(<span class="hljs-function">(<span class="hljs-params">value, key</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(key + <span class="hljs-string">&#x27;: &#x27;</span> + value))
<span class="hljs-comment">// prints all of the entries</span></code></pre>
				<a href="#querying-the-map" id="querying-the-map" style="color: inherit; text-decoration: none;">
					<h4>Querying the Map</h4>
				</a>
				<p>Coherence provides a rich set of primitives that allow developers to create advanced queries against
					a set of entries returning only those keys and/or values matching the specified criteria.
					See the <a href="https://oracle.github.io/coherence/20.06/api/java/index.html">documentation</a> for details
				on the Filters provided by this client.</p>
				<p>Let&#39;s assume we have a <code>NamedMap</code> in which we&#39;re storing <code>string</code> keys and some objects with the structure of:</p>
				<pre><code>{
<span class="hljs-symbol">  name:</span> <span class="hljs-params">&lt;string&gt;</span>
<span class="hljs-symbol">  age:</span>  <span class="hljs-params">&lt;number&gt;</span>
<span class="hljs-symbol">  hobbies:</span> [] <span class="hljs-comment">// of string</span>
}</code></pre>
				<p>First, let&#39;s insert a few objects:</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">await</span> map.set(<span class="hljs-string">&#x27;0001&#x27;</span>, {<span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Bill Smith&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">38</span>, <span class="hljs-attr">hobbies</span>: [<span class="hljs-string">&quot;gardening&quot;</span>, <span class="hljs-string">&quot;painting&quot;</span>]})
<span class="hljs-keyword">await</span> map.set(<span class="hljs-string">&#x27;0002&#x27;</span>, {<span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Fred Jones&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">56</span>, <span class="hljs-attr">hobbies</span>: [<span class="hljs-string">&quot;racing&quot;</span>, <span class="hljs-string">&quot;golf&quot;</span>]})
<span class="hljs-keyword">await</span> map.set(<span class="hljs-string">&#x27;0003&#x27;</span>, {<span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Jane Doe&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">48</span>, <span class="hljs-attr">hobbies</span>: [<span class="hljs-string">&quot;gardening&quot;</span>, <span class="hljs-string">&quot;photography&quot;</span>]})</code></pre>
				<p>Using a filter we can limit the result set returned by the map:</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> { Filters } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@oracle/coherence&#x27;</span>)

...

await map.entries(Filters.greater(<span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-number">40</span>))
<span class="hljs-comment">// [{key: &#x27;0002&#x27;, value: {name: &quot;Fred Jones&quot;...}}, {key: &#x27;0002&#x27;, value: {name: &quot;Jane Doe&quot;...}}]</span>

<span class="hljs-keyword">await</span> map.keys(Filters.arrayContains(<span class="hljs-string">&#x27;hobbies&#x27;</span>, <span class="hljs-string">&#x27;gardening&#x27;</span>))  
<span class="hljs-comment">// [&#x27;0001&#x27;, &#x27;0003&#x27;]</span>

<span class="hljs-keyword">await</span> map.values(Filters.not(Filters.arrayContains(<span class="hljs-string">&#x27;hobbies&#x27;</span>, <span class="hljs-string">&#x27;gardening&#x27;</span>)))
<span class="hljs-comment">// [{name: &quot;Fred Jones&quot;, age: 56, hobbies: [&quot;racing&quot;, &quot;golf&quot;]}]</span></code></pre>
				<a href="#aggregation" id="aggregation" style="color: inherit; text-decoration: none;">
					<h4>Aggregation</h4>
				</a>
				<p>Coherence provides developers with the ability to process some subset of the entries in a map,
				resulting in an aggregated result. See the <a href="https://oracle.github.io/coherence/20.06/api/java/index.html">documentation</a> for aggregators provided by this client.</p>
				<p>Assuming the same set of keys and values are present from the filtering example above:</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> { Aggregators, Filters } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@oracle/coherence&#x27;</span>)

...

await map.aggregate(Aggregators.average(<span class="hljs-string">&#x27;age&#x27;</span>))
<span class="hljs-comment">// 47.3</span>

<span class="hljs-keyword">await</span> map.aggregate(Aggregators.sum(<span class="hljs-string">&#x27;age&#x27;</span>))
<span class="hljs-comment">// 142</span>

<span class="hljs-keyword">await</span> map.aggregate(Filters.greater(<span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-number">40</span>), Aggregators.count())
<span class="hljs-comment">// 2</span></code></pre>
				<a href="#entry-processing" id="entry-processing" style="color: inherit; text-decoration: none;">
					<h4>Entry Processing</h4>
				</a>
				<p>An entry processor allows mutation of map entries in-place within the cluster instead of bringing the entire object
				to the client, updating, and pushing the value back.  See the <a href="https://oracle.github.io/coherence/20.06/api/java/index.html">documentation</a> for the processors provided by this client.</p>
				<p>Assuming the same set of keys and values are present from the filtering and aggregation examples:</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> { Filters, Processors } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@oracle/coherence&#x27;</span>)

...

<span class="hljs-comment">// targeting a specific entry</span>
<span class="hljs-keyword">await</span> map.invoke(<span class="hljs-string">&#x27;0001&#x27;</span>, Processors.extract(<span class="hljs-string">&#x27;age&#x27;</span>))
<span class="hljs-comment">// returns: 38</span>

<span class="hljs-comment">// target all entries across the cluster</span>
<span class="hljs-keyword">await</span> map.invokeAll(Processors.extract(<span class="hljs-string">&#x27;age&#x27;</span>))
<span class="hljs-comment">// returns: [[&#x27;0001&#x27;, 38], [&#x27;0002&#x27;, 56], [&#x27;0003&#x27;, 48]]</span>

<span class="hljs-comment">// target all entries matching filtered critera</span>
<span class="hljs-keyword">await</span> map.invoke(Filters.greater(<span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-number">40</span>), Processors.extract(<span class="hljs-string">&#x27;age&#x27;</span>))
<span class="hljs-comment">// returns: [[&#x27;0002&#x27;, 56], [&#x27;0003&#x27;, 48]]</span>

<span class="hljs-comment">// incrementing a number &#x27;in-place&#x27;</span>
<span class="hljs-keyword">await</span> map.invoke(Filters.greater(<span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-number">40</span>), Processors.increment(<span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-number">1</span>))
<span class="hljs-comment">// returns [[&#x27;0002&#x27;, 57], [&#x27;0003&#x27;, 49]]</span>

<span class="hljs-comment">// update a value &#x27;in-place&#x27;</span>
<span class="hljs-keyword">await</span> map.invoke(<span class="hljs-string">&#x27;0001&#x27;</span>, Processors.update(<span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-number">100</span>))
<span class="hljs-comment">// returns true meaning the value was updated</span>
<span class="hljs-keyword">await</span> map.get(<span class="hljs-string">&#x27;0001&#x27;</span>)
<span class="hljs-comment">// the value will reflect the new age value</span></code></pre>
				<a href="#events" id="events" style="color: inherit; text-decoration: none;">
					<h3>Events</h3>
				</a>
				<p>Coherence provides the ability to subscribe to notifications pertaining to a particular map/cache.
					Registration is works similarly to event registration with Node, with some key differences.  In addition
					to listening for a specific event, it is possible to listen to events for changes made to a specific key, or using
				a Filter, it&#39;s possible to limit the events raised to be for a subset of the map entries.</p>
				<p>Now, let&#39;s register a listener:</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { event } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@oracle/coherence&#x27;</span>

<span class="hljs-keyword">const</span> MapEventType = event.MapEventType
<span class="hljs-keyword">const</span> MapListener = event.MapListener

<span class="hljs-keyword">const</span> handler = <span class="hljs-function">(<span class="hljs-params">event: MapEvent</span>) =&gt;</span> { 
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Event: &#x27;</span> + event.description 
    + <span class="hljs-string">&#x27;, Key: &#x27;</span> + <span class="hljs-built_in">JSON</span>.stringify(event.key) 
    + <span class="hljs-string">&#x27;, New Value: &#x27;</span> + <span class="hljs-built_in">JSON</span>.stringify(event.newValue)
    + <span class="hljs-string">&#x27;, Old Value: &#x27;</span> + <span class="hljs-built_in">JSON</span>.stringify(event.oldValue))
}

<span class="hljs-keyword">const</span> listener = <span class="hljs-keyword">new</span> MapListener()
  .on(MapEventType.INSERT, handler)
  .on(MapEventType.UPDATE, handler)
  .on(MapEventType.DELETE, handler)

<span class="hljs-comment">// register to receive all event types for all entries within the map</span>
<span class="hljs-keyword">await</span> map.addListener(listener)

<span class="hljs-keyword">await</span> map.set(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>)
<span class="hljs-comment">// Event: insert, Key: a, New Value: b, Old Value: null</span>

<span class="hljs-keyword">await</span> map.set(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>)
<span class="hljs-comment">// Event: update, Key: a, New Value: c, Old Value: b</span>

<span class="hljs-keyword">await</span> map.delete(<span class="hljs-string">&#x27;a&#x27;</span>)
<span class="hljs-comment">// Event: delete, Key: a, New Value: null, Old Value: c</span>

<span class="hljs-comment">// remove the listeners</span>
<span class="hljs-keyword">await</span> map.removeListener(listener)

<span class="hljs-comment">// =======================================</span>

<span class="hljs-comment">// Assume the previous listener as well as the following key and values</span>
<span class="hljs-comment">//   [&#x27;0001&#x27;, {name: &quot;Bill Smith&quot;, age: 38, hobbies: [&quot;gardening&quot;, &quot;painting&quot;]}]</span>
<span class="hljs-comment">//   [&#x27;0002&#x27;, {name: &quot;Fred Jones&quot;, age: 56, hobbies: [&quot;racing&quot;, &quot;golf&quot;]}]</span>
<span class="hljs-comment">//   [&#x27;0003&#x27;, {name: &quot;Jane Doe&quot;, age: 48, hobbies: [&quot;gardening&quot;, &quot;photography&quot;]}]</span>

<span class="hljs-comment">// Add handlers for updates to &#x27;0001&#x27;</span>
<span class="hljs-keyword">await</span> map.addListener(listener, <span class="hljs-string">&#x27;0001&#x27;</span>)

<span class="hljs-keyword">await</span> map.update(<span class="hljs-string">&#x27;0002&#x27;</span>, <span class="hljs-string">&#x27;0002&#x27;</span>)
<span class="hljs-comment">// does not generate any events</span>

<span class="hljs-keyword">await</span> map.invoke(<span class="hljs-string">&#x27;0001&#x27;</span>, Processors.increment(<span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-number">1</span>))
<span class="hljs-comment">// Event: update, Key: 0001, New Value: {name: &quot;Bill Smith&quot;, age: 39, hobbies: [&quot;gardening&quot;, &quot;painting&quot;]}, Old Value: {name: &quot;Bill Smith&quot;, age: 38, hobbies: [&quot;gardening&quot;, &quot;painting&quot;]}</span>

<span class="hljs-keyword">await</span> map.delete(<span class="hljs-string">&#x27;0001&#x27;</span>) 
<span class="hljs-comment">// does not generate any events</span>

<span class="hljs-comment">// remove the key listener</span>
<span class="hljs-keyword">await</span> map.removeMapListener(listener, <span class="hljs-string">&#x27;0001&#x27;</span>)

<span class="hljs-comment">// =======================================</span>

<span class="hljs-comment">// Assume the same setup as the previous example, except instead of listening to events for a single key,</span>
<span class="hljs-comment">// we&#x27;ll instead listen for events raised for entries that match the filtered criteria.</span>
<span class="hljs-keyword">const</span> filter = Filters.event(Filters.greater(<span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-number">40</span>), filter.MapEventFilter.UPDATED)

<span class="hljs-comment">// Listen to all updates to entries where the age property of the entry value is greater than 40</span>
<span class="hljs-keyword">await</span> map.addListener(listener, filter) 

<span class="hljs-keyword">await</span> map.invokeAll(Processors.increment(<span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-number">1</span>));
<span class="hljs-comment">// Event: update, Key: 0002, New Value: {name: &quot;Fred Jones&quot;, age: 57, hobbies: [&quot;racing&quot;, &quot;golf&quot;]}, Old Value: {name: &quot;Fred Jones&quot;, age: 56, hobbies: [&quot;racing&quot;, &quot;golf&quot;]}</span>
<span class="hljs-comment">// Event: update, Key: 0003, New Value: &quot;Jane Doe&quot;, age: 49, hobbies: [&quot;gardening&quot;, &quot;photography&quot;]}, Old Value: &quot;Jane Doe&quot;, age: 48, hobbies: [&quot;gardening&quot;, &quot;photography&quot;]}</span>

<span class="hljs-comment">// remove the filter listener</span>
<span class="hljs-keyword">await</span> map.removeMapListener(listener, filter)</code></pre>
				<a href="#cutpaste-example" id="cutpaste-example" style="color: inherit; text-decoration: none;">
					<h3>Cut/Paste Example</h3>
				</a>
				<p>Here&#39;s an example that can be pasted into a new node project that is using this library:</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> { Session } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@oracle/coherence&#x27;</span>)

<span class="hljs-keyword">let</span> session = <span class="hljs-keyword">new</span> Session()
<span class="hljs-keyword">let</span> map = session.getMap(<span class="hljs-string">&#x27;Test&#x27;</span>)

setImmediate(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Map size is &quot;</span> + (<span class="hljs-keyword">await</span> map.size))
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Inserting entry (key=1, value=One)&quot;</span>)
  <span class="hljs-keyword">await</span> map.set(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;One&quot;</span>)
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Map entry is &quot;</span> + (<span class="hljs-keyword">await</span> map.get(<span class="hljs-number">1</span>)))
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Deleting entry (key=1)&quot;</span>)
  <span class="hljs-keyword">await</span> map.delete(<span class="hljs-number">1</span>)
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Map size is &quot;</span> + (<span class="hljs-keyword">await</span> map.size))
  <span class="hljs-keyword">await</span> session.close()
})</code></pre>
				<p>When run, it produces:</p>
				<pre><code class="language-bash">Map size is 0
Inserting entry (key=1, value=One)
Map entry is One
Deleting entry (key=1)
Map size is 0</code></pre>
				<a href="#references" id="references" style="color: inherit; text-decoration: none;">
					<h3>References</h3>
				</a>
				<ul>
					<li>Oracle Coherence JavaScript Client - <a href="https://oracle.github.io/coherence/20.06/api/js/index.html">https://oracle.github.io/coherence/20.06/api/js/index.html</a> </li>
					<li>Oracle Coherence CE Documentation - <a href="https://coherence.community/20.06/docs/#/docs/about/01_overview">https://coherence.community/20.06/docs/#/docs/about/01_overview</a></li>
				</ul>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/aggregator.html">aggregator</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/event.html">event</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/extractor.html">extractor</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/filter.html">filter</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/processor.html">processor</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/util.html">util</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class">
						<a href="classes/aggregators.html" class="tsd-kind-icon">Aggregators</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/extractors.html" class="tsd-kind-icon">Extractors</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/filters.html" class="tsd-kind-icon">Filters</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/options.html" class="tsd-kind-icon">Options</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/processors.html" class="tsd-kind-icon">Processors</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/session.html" class="tsd-kind-icon">Session</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/tlsoptions.html" class="tsd-kind-icon">Tls<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter">
						<a href="interfaces/namedcache.html" class="tsd-kind-icon">Named<wbr>Cache</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter">
						<a href="interfaces/namedmap.html" class="tsd-kind-icon">Named<wbr>Map</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer>
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>