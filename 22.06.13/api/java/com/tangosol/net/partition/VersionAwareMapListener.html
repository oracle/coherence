<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>VersionAwareMapListener (Java API Reference for Oracle® Coherence Community Edition)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="VersionAwareMapListener (Java API Reference for Oracle\u00AE Coherence Community Edition)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":18,"i1":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/VersionAwareMapListener.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Java API Reference for Oracle® Coherence Community Edition<br>       (22.06.13)</b></div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.tangosol.net.partition</a></div>
<h2 title="Interface VersionAwareMapListener" class="title">Interface VersionAwareMapListener&lt;K,&#8203;V&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/EventListener.html?is-external=true" title="class or interface in java.util" class="externalLink">EventListener</a></code>, <code><a href="../../util/MapListener.html" title="interface in com.tangosol.util">MapListener</a>&lt;K,&#8203;V&gt;</code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">VersionAwareMapListener&lt;K,&#8203;V&gt;</span>
extends <a href="../../util/MapListener.html" title="interface in com.tangosol.util">MapListener</a>&lt;K,&#8203;V&gt;</pre>
<div class="block">Direct implementations of this interface are generally considered advanced
 use cases, such as handling event receiver (client process) restarts. Commonly
 <a href="../../util/MapListener.html" title="interface in com.tangosol.util"><code>MapListener</code></a> implementations simply need to suggest that they are
 <a href="../../util/MapListener.html#VERSION_AWARE"><code>version aware</code></a>. Coherence will automatically
 create an implementation of this interface and track partition versions for
 relevant partitions and re-register to replay missed events. A more detailed
 description of the semantics for implementors of this interface is described
 below.
 <p>
 Implementations of this interface suggest that they are aware of event versions
 (<a href="../../util/MapEvent.html#getPartition()"><code>partition</code></a> &
 <a href="../../util/MapEvent.html#getVersion()"><code>version</code></a>), such that this
 implementation can be asked for all partition version that were last received
 or is interested in receiving. Additionally, there is a convenient <a href="#getCurrentVersion()"><code>current version</code></a> method, which
 is generally applicable when there is a single partition being tracked.
 <p>
 The primary reason to be version aware is to allow the receiver/client to track the
 last event it received. If the receiver ever becomes disconnected from the
 source of events, it allows the receiver to ask the source for all events
 that were missed. The source may replay:
 <ol>
     <li>all the events from the last event received to the latest</li>
     <li>only the events that were retained, if some were purged</li>
     <li>an event representing the latest modification</li>
     <li>no events if the source does not support event history</li>
 </ol>
 There are several reasons why the source of events (ownership enabled members)
 may become disconnected from the receiver of events.
 <ol>
     <li><b>Network disruption</b> - event receiver becomes disconnected from
     the source / the rest of the cluster</li>
     <li><b>Proxy (Extend/gRPC) disruption</b> - a proxy the client was connected
     to dies and therefore reconnects to a different proxy</li>
     <li><b>Client death</b> - client process dies but the same logical process
     restarts</li>
 </ol>
 For cases 1 & 2, having to "reconnect" to the source is automatically handled
 by Coherence, thus this interface allows Coherence to which version for
 each partition was last read and request the replay with the aforementioned
 considerations.
 <p>
 For the 3rd case it requires a call to <a href="../../util/ObservableMap.html#addMapListener(com.tangosol.util.MapListener)"><code>addMapListener</code></a> passing an implementation of this interface that returns the
 relevant versions. Clearly for the 3rd case it requires the client to persist
 the partition version information such that it can be recovered and replay
 requested from the event source.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Coherence 21.06</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>hr  2021.01.29</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ALL">ALL</a></span></code></th>
<td class="colLast">
<div class="block">A constant that suggests to an event source to send all known versions
 (subject to the event source's retention policy) and all future versions.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#HEAD">HEAD</a></span></code></th>
<td class="colLast">
<div class="block">A constant that suggests to an event source to send all future events.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#PRIMING">PRIMING</a></span></code></th>
<td class="colLast">
<div class="block">A constant that suggests to an event source to send the current version
 and all future versions.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="fields.inherited.from.class.com.tangosol.util.MapListener">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;com.tangosol.util.<a href="../../util/MapListener.html" title="interface in com.tangosol.util">MapListener</a></h3>
<code><a href="../../util/MapListener.html#ASYNCHRONOUS">ASYNCHRONOUS</a>, <a href="../../util/MapListener.html#SYNCHRONOUS">SYNCHRONOUS</a>, <a href="../../util/MapListener.html#VERSION_AWARE">VERSION_AWARE</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>default long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCurrentVersion()">getCurrentVersion</a></span>()</code></th>
<td class="colLast">
<div class="block">A convenience method that returns a single version with the same rules
 as described <a href="#getVersions()"><code>here</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="VersionedPartitions.html" title="interface in com.tangosol.net.partition">VersionedPartitions</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getVersions()">getVersions</a></span>()</code></th>
<td class="colLast">
<div class="block">Return a data structure that holds a mapping of <code>partition -&gt; version</code>.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.com.tangosol.util.MapListener">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.tangosol.util.<a href="../../util/MapListener.html" title="interface in com.tangosol.util">MapListener</a></h3>
<code><a href="../../util/MapListener.html#characteristics()">characteristics</a>, <a href="../../util/MapListener.html#entryDeleted(com.tangosol.util.MapEvent)">entryDeleted</a>, <a href="../../util/MapListener.html#entryInserted(com.tangosol.util.MapEvent)">entryInserted</a>, <a href="../../util/MapListener.html#entryUpdated(com.tangosol.util.MapEvent)">entryUpdated</a>, <a href="../../util/MapListener.html#isAsynchronous()">isAsynchronous</a>, <a href="../../util/MapListener.html#isSynchronous()">isSynchronous</a>, <a href="../../util/MapListener.html#isVersionAware()">isVersionAware</a>, <a href="../../util/MapListener.html#synchronous()">synchronous</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="HEAD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HEAD</h4>
<pre>static final&nbsp;long HEAD</pre>
<div class="block">A constant that suggests to an event source to send all future events.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.tangosol.net.partition.VersionAwareMapListener.HEAD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="PRIMING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PRIMING</h4>
<pre>static final&nbsp;long PRIMING</pre>
<div class="block">A constant that suggests to an event source to send the current version
 and all future versions.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.tangosol.net.partition.VersionAwareMapListener.PRIMING">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="ALL">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ALL</h4>
<pre>static final&nbsp;long ALL</pre>
<div class="block">A constant that suggests to an event source to send all known versions
 (subject to the event source's retention policy) and all future versions.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.tangosol.net.partition.VersionAwareMapListener.ALL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getVersions()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersions</h4>
<pre class="methodSignature"><a href="VersionedPartitions.html" title="interface in com.tangosol.net.partition">VersionedPartitions</a>&nbsp;getVersions()</pre>
<div class="block">Return a data structure that holds a mapping of <code>partition -&gt; version</code>.
 The absence of a partition suggests no interest in receiving events emanating
 from said partition.
 <p>
 The version represents the last version that was read. If this listener
 is being registered (either for the first or n<sup>th</sup> time) this
 method will be called and passed to the source to allow any missed events
 to be replayed. Additionally, implementations can return any of the following
 formally defined constants (the behavior is performed in addition to
 the registration of this listener with the source):
 <ol>
     <li><a href="#HEAD"><code>HEAD</code></a> - send all future versions</li>
     <li><a href="#PRIMING"><code>PRIMING</code></a> - send current and all future versions</li>
     <li><a href="#ALL"><code>ALL</code></a> - send all known versions</li>
 </ol>
 <p>
 A listener is always registered under the context of a key or a filter.
 A key maps to a single partition while a filter generally maps to all
 partitions, therefore the registrations are either targeted to a single
 node or multiple nodes respectively.
 <p>
 When replaying events if the listener was registered under the context
 of a key (or many keys) the events that are replayed will only be for
 said key(s) and not other keys owned by the same partition. Conversely,
 when events are replayed for filter-based registrations events relating
 to <b>all</b> keys for the returned partitions are replayed. In both cases,
 only future events for the given partition versions are replayed.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a data structure that holds a mapping of <code>partition -&gt; version</code>
         representing the last received versions thus can be sent to the
         source to replay missing events</dd>
</dl>
</li>
</ul>
<a id="getCurrentVersion()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getCurrentVersion</h4>
<pre class="methodSignature">default&nbsp;long&nbsp;getCurrentVersion()</pre>
<div class="block">A convenience method that returns a single version with the same rules
 as described <a href="#getVersions()"><code>here</code></a>. Callers of this method can generally
 assume the partition(s) this version relates to. Often this is due to
 the listener being registered with a key.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the last version received</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/VersionAwareMapListener.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Java API Reference for Oracle® Coherence Community Edition<br>       (22.06.13)</b></div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><script>                       if (typeof useModuleDirectories !== 'undefined') {                         useModuleDirectories = false;                       }                       </script></small></p>
</footer>
</body>
</html>
